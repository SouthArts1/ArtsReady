<div class="grid_12">
  <hgroup>
    <h1><%= @page.title rescue 'Page Not Found'%></h1>
  </hgroup>
</div>

<div class="grid_12">
  <%= @page.to_html rescue "No page found"%>
</div>

<div class="grid_12">
	
	<% if @organization.errors.any? %>
  <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @organization.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

	<% form_for @payment, :url => "/billing" do |f| %>
		<%= f.hidden_field :organization_id, value: @organization.id %>
		<%= f.label :billing_first_name %><br />
		<%= f.text_field :billing_first_name %><br />
		<%= f.label :billing_last_name %><br />
		<%= f.text_field :billing_last_name %><br />
		<%= f.label :billing_address %><br />
		<%= f.text_field :billing_address %><br />
		<%= f.label :billing_city %><br />
		<%= f.text_field :billing_city %><br />
		<%= f.label :billing_state %><br />
		<%= f.text_field :billing_state %><br />
		<%= f.label :billing_zipcode %><br />
		<%= f.text_field :billing_zipcode %><br />
		<br />
		Payment information:
		<p style="padding: 8px 12px; background: #dfd; color: #151; display: block; margin: 10px 0px; width: 600px; font-size: 13px; line-height: 15px; border-left: 3px solid #ada;">
			This information will not be saved.<br /> 
			Each subscription will be processed individually on its given timeline.<br />
			You may use a Credit/Debit Card for processing, or your checking or savings account.
		</p><br /><br />
		<table>
			<tr>
				<td>Please choose your payment type:</td>
				<td>
					<select id="payment_type" name="payment_type">
						<option value="blank"></option>
						<option value="cc">Credit Card</option>
						<option value="bank">Bank Account</option>
					</select>
				</td>
			</tr>
		</table>
		<div id="cc_info" style="display:none;">
			<table>
				<tr>
					<td>Credit Card Number:</td>
					<td><%= f.text_field :number %></td>
				</tr>
				<tr>
					<td>Expiration Date:</td>
					<td><%= f.date_select :expiry_month, :order => [:month] %> <%= f.date_select :expiry_year, :order => [:year] %></td></td>
				</tr>
				<tr>
					<td>Verification Number (CCV):</td>
					<td><%= f.text_field :ccv %></td>
				</tr>
			</table>
			<br />
		</div>
		<div id="bank_info" style="display:none;">
			<table>
				<tr>
					<td>Bank Name:</td>
					<td><%= f.text_field :bank_name %></td>
				</tr>
				<tr>
					<td>Account Type:</td>
					<td><%= f.select :account_type, ["Checking", "Savings"] %></td>
				</tr>
				<tr>
					<td>ABA Routing Number:</td>
					<td><%= f.text_field :routing_number %></td>
				</tr>
				<tr>
					<td>Account Number:</td>
					<td><%= f.text_field :account_number %></td>
				</tr>
			</table>
			<br />
		</div>
		<%= f.submit %>
	<script type="text/javascript">
		$("#payment_type").change(function() {
			var type = "#" + $("#payment_type").val() + "_info";
			$("#cc_info").slideUp();
			$("#bank_info").slideUp();

			$(type).slideDown();
		});
	</script>
	<% end %>
</div>